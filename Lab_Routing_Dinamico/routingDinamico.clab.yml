name: RoutingDinamico

topology:
  kinds:
    linux:
      image: ghcr.io/hellt/network-multitool
    nokia_srlinux:
      image: ghcr.io/nokia/srlinux

  nodes:
    clientA:
      kind: linux
      exec:
        - sleep 1
        - ip addr add 192.168.0.2/24 dev eth1
        - ip route replace default via 192.168.0.1
    clientB:
      kind: linux
      exec:
        - sleep 1
        - ip addr add 192.168.2.2/30 dev eth1
        - ip route replace default via 192.168.2.1
    r1:
      kind: nokia_srlinux
      startup-config: ./part_config/r1_startup.cli
    c0:
      kind: nokia_srlinux
      startup-config: ./part_config/c0_startup.cli
    c1:
      kind: nokia_srlinux
      startup-config: ./part_config/c1_startup.cli
    c2:
      kind: nokia_srlinux
      startup-config: ./part_config/c2_startup.cli
    c3:
      kind: nokia_srlinux
      startup-config: ./part_config/c3_startup.cli
    c4:
      kind: nokia_srlinux
      startup-config: ./part_config/c4_startup.cli

  links:
    - endpoints: ["clientA:eth1","r1:e1-1"]
    - endpoints: ["r1:e1-2","c1:e1-2"]
    - endpoints: ["c1:e1-3","c3:e1-1"]
    - endpoints: ["c1:e1-1","c0:e1-1"]
    - endpoints: ["c0:e1-2","c2:e1-2"]
    - endpoints: ["c0:e1-3","c3:e1-3"]
    - endpoints: ["c0:e1-4","c4:e1-1"]
    - endpoints: ["c3:e1-2","c4:e1-2"]
    - endpoints: ["c2:e1-3","c4:e1-3"]
    - endpoints: ["clientB:eth1","c2:e1-1"]
